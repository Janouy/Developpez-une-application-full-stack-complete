<app-header class="hidden lg:block"></app-header>
<app-back-arrow />
<app-header-mini />
<div class="flex justify-start items-start lg:items-center lg:h-screen">
    <form [formGroup]="registerForm" (ngSubmit)="onRegister()" class="m-auto flex flex-col  ">
        <div class="w-full flex justify-center">
            <h2 class="text-2xl font-semibold text-gray-900 mb-2">Inscription</h2>
        </div>
        <div class="mt-10 flex flex-col">
            <div class="form-group">
                <label for="username" class="block text-sm/6 font-medium text-gray-900 ">Nom d'utilisateur</label>
                <div class="mt-2 relative">
                    <div
                        class="flex items-center rounded-md bg-white pl-3 outline-1 -outline-offset-1 outline-gray-300 focus-within:outline-2 focus-within:-outline-offset-2 focus-within:outline-indigo-600">
                        <input id="username" type="text" name="username" formControlName="name"
                            autocomplete="current-name"
                            class="block min-w-0 grow bg-white py-1.5 pr-3 pl-1 text-base text-gray-900 placeholder:text-gray-400 focus:outline-none sm:text-sm/6" />
                    </div>

                    <div class="h-5 mt-1 text-sm text-red-600">
                        @if (registerForm.get('name')?.hasError('minlength')) {
                        4 caractères requis
                        }
                    </div>
                </div>
            </div>
            <div class="form-group">
                <label for="email" class="block text-sm/6 font-medium text-gray-900">Adresse e-mail</label>
                <div class="mt-2">
                    <div
                        class="flex items-center rounded-md bg-white pl-3 outline-1 -outline-offset-1 outline-gray-300 focus-within:outline-2 focus-within:-outline-offset-2 focus-within:outline-indigo-600">
                        <input id="email" type="text" name="username" formControlName="email"
                            autocomplete="current-email"
                            class="block min-w-0 grow bg-white py-1.5 pr-3 pl-1 text-base text-gray-900 placeholder:text-gray-400 focus:outline-none sm:text-sm/6" />
                    </div>
                    <div class="h-5 mt-1 text-sm text-red-600">
                        @if (registerForm.get('email')?.hasError('pattern')){
                        Format invalide
                        }
                    </div>
                </div>
            </div>
            <div class="form-group">
                <label for="password" class="block text-sm/6 font-medium text-gray-900">Mot de passe</label>
                <div class="mt-2">
                    <div
                        class="flex items-center rounded-md bg-white pl-3 outline-1 -outline-offset-1 outline-gray-300 focus-within:outline-2 focus-within:-outline-offset-2 focus-within:outline-indigo-600">
                        <input id="password" [type]="hidePassword ? 'password' : 'text'" name="password"
                            formControlName="password" autocomplete="current-password"
                            class="block flex-grow bg-white py-1.5 pl-1 pr-3 text-base text-gray-900 placeholder:text-gray-400 focus:outline-none sm:text-sm/6" />
                        <div type="button" (click)="hidePassword = !hidePassword"
                            class="flex items-center justify-center px-3 text-gray-500 hover:text-indigo-600 focus:outline-none cursor-pointer"
                            [attr.aria-label]="'Afficher le mot de passe'" [attr.aria-pressed]="!hidePassword">
                            @if (hidePassword) {
                            <fa-icon [icon]="faEye" class="text-lg"></fa-icon>
                            } @else {
                            <fa-icon [icon]="faEyeSlash" class="text-lg"></fa-icon>
                            }

                            <ng-template #showIcon>
                                <fa-icon [icon]="faEyeSlash" class="text-lg"></fa-icon>
                            </ng-template>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="flex justify-center w-full mt-3">
            <button type="submit"
                class="cursor-pointer rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white shadow-xs hover:bg-indigo-500 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 w-1/2"
                [disabled]="registerForm.invalid">
                S'inscrire
            </button>
        </div>
        <div class="h-5 mt-1 text-sm text-red-600">
            @if (registerForm.get('password')?.hasError('pattern')){
            Le mot de passe doit comporter:
            <ul>
                <li>Plus de 8 caractères</li>
                <li>1 chiffre</li>
                <li>1 caractère spécial</li>
                <li>1 lettre minuscule</li>
                <li>1 lettre majuscule</li>
            </ul>
            }
        </div>
        <div class="h-5 mt-1 text-sm text-red-600 text-center">
            @if(onError){
            Création de compte impossible
            }
        </div>
    </form>
</div>